<app-customer-nav></app-customer-nav>
<div class="container mt-4"> 
    <div id="productCarousel" class="carousel slide mb-5" data-bs-ride="carousel" data-bs-interval="3000">
    
        <div class="carousel-indicators"> <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="0"
                class="active"></button> <button type="button" data-bs-target="#productCarousel"
                data-bs-slide-to="1"></button> <button type="button" data-bs-target="#productCarousel"
                data-bs-slide-to="2"></button> </div>
        <div class="carousel-inner rounded-3 shadow">
            <div class="carousel-item active" style="background-image: url('assets/images/image.png');">
                <div class="d-flex align-items-center p-4"
                    style="background-color: #1c2340; color: white; border-radius: 15px;">
                    <div class="w-50">
                        <h6>Best Deal Online on smart watches</h6>
                        <h2 class="fw-bold">SMART WEARABLE.</h2>
                        <p>UP to 80% OFF</p>
                    </div>
                    <div class="w-50 text-center"> <img src="assets/images/smart.jpg" class="d-block w-75 mx-auto"
                            alt="Smart Watch" style="height: 200px;"> </div>
                </div>
            </div>
            <div class="carousel-item">
                <div class="d-flex align-items-center p-4"
                    style="background-color: #1c2340; color: white; border-radius: 15px;">
                    <div class="w-50">
                        <h6>Exclusive Offer on Headphones</h6>
                        <h2 class="fw-bold">WIRELESS SOUND.</h2>
                        <p>Flat 50% OFF</p>
                    </div>
                    <div class="w-50 text-center"> <img src="assets/images/image.png" class="d-block w-75 mx-auto"
                            alt="Headphones" style="height: 200px;"> </div>
                </div>
            </div> 
            <div class="carousel-item">
                <div class="d-flex align-items-center p-4"
                    style="background-color: #1c2340; color: white; border-radius: 15px;">
                    <div class="w-50">
                        <h6>Special Offer on Mobiles</h6>
                        <h2 class="fw-bold">SMARTPHONES.</h2>
                        <p>Save up to ₹5000</p>
                    </div>
                    <div class="w-50 text-center"> <img src="assets/images/mo.jpg" class="d-block w-75 mx-auto"
                            alt="Mobile" style="height: 200px;"> </div>
                </div>
            </div>
        </div>
    </div> 
    <div class="row mb-4">
        <div class="col-md-6"> <label class="form-label fw-bold">Sort by Price</label> <select
                class="form-select shadow-sm rounded-pill" (change)="onPriceFilterChange($event)">
                <option value="">-- Select --</option>
                <option value="lowToHigh">Low to High</option>
                <option value="highToLow">High to Low</option>
            </select> </div>
        <div class="col-md-6"> <label class="form-label fw-bold">Filter by Company</label> <select
                class="form-select shadow-sm rounded-pill" (change)="onCompanyFilterChange($event)">
                <option value="">-- All Companies --</option>
                <option *ngFor="let company of companies" [value]="company">{{ company }}</option>
            </select> </div>
    </div> 
    <div class="row g-4">
        <div class="col-md-3 col-sm-6" *ngFor="let product of paginatedProducts">
            <div class="card h-100 shadow-sm rounded-3"> <img *ngIf="product.image1Base64"
                    [src]="'data:image/png;base64,'+product.image1Base64" class="card-img-top"
                    alt="{{product.productName}}" />
                <div class="card-body">
                    <h5 class="card-title">{{ product.productName }}</h5>
                    <p><strong>Company:</strong> {{ product.productCompany }}</p>
                    <p><strong>Price:</strong> ₹{{ product.price }}</p> <button class="btn btn-primary w-100"
                        (click)="orderNow(product)">Order Now</button>
                </div>
            </div>
        </div>
    </div> 
    
    <nav class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item" [class.disabled]="currentPage === 1"> <a class="page-link"
                    (click)="prevPage()">Previous</a> </li>
            <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index"
                [class.active]="currentPage === i + 1"> <a class="page-link" (click)="goToPage(i + 1)">{{ i + 1 }}</a>
            </li>
            <li class="page-item" [class.disabled]="currentPage === totalPages"> <a class="page-link"
                    (click)="nextPage()">Next</a> </li>
        </ul>
    </nav>


  <div class="offcanvas offcanvas-end shadow-lg p-3" tabindex="-1" id="orderCanvas" aria-labelledby="orderCanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="orderCanvasLabel">{{ selectedProduct?.productName }}</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">

      <div id="productImagesCarousel" class="carousel slide mb-3" *ngIf="selectedProduct">
        <div class="carousel-inner rounded">
          <div class="carousel-item active" *ngIf="selectedProduct.image1Base64">
            <img [src]="'data:image/png;base64,'+selectedProduct.image1Base64" class="d-block w-100 rounded" alt="Image 1">
          </div>
          <div class="carousel-item" *ngIf="selectedProduct.image2Base64">
            <img [src]="'data:image/png;base64,'+selectedProduct.image2Base64" class="d-block w-100 rounded" alt="Image 2">
          </div>
          <div class="carousel-item" *ngIf="selectedProduct.image3Base64">
            <img [src]="'data:image/png;base64,'+selectedProduct.image3Base64" class="d-block w-100 rounded" alt="Image 3">
          </div>
          <div class="carousel-item" *ngIf="selectedProduct.image4Base64">
            <img [src]="'data:image/png;base64,'+selectedProduct.image4Base64" class="d-block w-100 rounded" alt="Image 4">
          </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#productImagesCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon bg-secondary"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#productImagesCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon bg-secondary"></span>
        </button>
      </div>

      <div *ngIf="selectedProduct">
        <p><strong>Company:</strong> {{ selectedProduct.productCompany }}</p>
        <p><strong>Price:</strong> ₹{{ selectedProduct.price }}</p>
        <p><strong>Description:</strong> {{ selectedProduct.description }}</p>

        <div class="d-flex align-items-center mb-3">
          <label class="me-2 fw-bold">Quantity:</label>
          <input type="number" class="form-control w-25" [(ngModel)]="quantity" min="1" (change)="updateTotal()" />
        </div>

        <h5>Total: ₹{{ totalPrice }}</h5>

        <button class="btn btn-success w-100 mt-3" (click)="bookNow()">Book Now</button>
      </div>
    </div>
  </div>
</div> <app-footer></app-footer>