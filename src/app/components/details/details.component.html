<app-customer-nav></app-customer-nav>

<div class="container my-5" *ngIf="product">
  <div class="row g-4">

    <div class="col-md-5">
      <div class="card shadow-sm border-0 rounded-4 p-3 text-center">
        <img [src]="selectedImage" class="img-fluid rounded-4 mb-3 main-image" alt="Selected Product">

        <div class="d-flex justify-content-center flex-wrap gap-2">
          <img *ngFor="let img of images" [src]="img" (click)="selectedImage = img"
               [class.border-primary]="img === selectedImage"
               class="img-thumbnail thumb-img" alt="Thumbnail"
               style="width: 70px; height: 70px; object-fit: cover; cursor: pointer;">
        </div>
      </div>
    </div>

    <div class="col-md-7">
      <h3 class="fw-bold">{{ product.productName }}</h3>
      <p class="text-secondary mb-1">{{ product.productCompany }}</p>

      <div class="mb-3">
        <span class="badge bg-success me-2">{{ product.condition }}</span>
        <span class="badge bg-light text-dark">{{ product.color }}</span>
      </div>

      <h2 class="text-success fw-bold">â‚¹{{ product.price | number:'1.0-0' }}</h2>
      <p class="text-muted small">Original Price: â‚¹{{ product.originalPrice }}</p>

      <p class="mt-3">{{ product.description }}</p>

      <div class="mt-4">
        <h5>Specifications</h5>
        <table class="table table-borderless small">
          <tr><td><strong>RAM</strong></td><td>{{ product.ram }}</td></tr>
          <tr><td><strong>Storage</strong></td><td>{{ product.storage }}</td></tr>
          <tr><td><strong>Display</strong></td><td>{{ product.displaySize }} inch</td></tr>
          <tr><td><strong>Battery</strong></td><td>{{ product.batteryCapacity }} mAh</td></tr>
          <tr><td><strong>Camera</strong></td><td>{{ product.camera }}</td></tr>
          <tr><td><strong>OS</strong></td><td>{{ product.operatingSystem }}</td></tr>
          <tr><td><strong>Network</strong></td><td>{{ product.network }}</td></tr>
          <tr><td><strong>Warranty</strong></td><td>{{ product.warranty }} from product receive date</td></tr>
        </table>
      </div>

      <!-- <div class="mt-4 d-flex align-items-center gap-2">
        <label class="fw-semibold mb-0">Quantity:</label>
        <div class="input-group" style="width: 120px;">
          <button class="btn btn-outline-primary" type="button" (click)="decreaseQuantity()">âˆ’</button>
          <input type="number" class="form-control text-center" [(ngModel)]="quantity" min="1">
          <button class="btn btn-outline-primary" type="button" (click)="increaseQuantity()">+</button>
        </div>
      </div> -->

      <!-- Total Price -->
      <!-- <div class="mt-2">
        <strong>Total: </strong> â‚¹{{ totalPrice | number:'1.0-0' }}
      </div> -->

     <div class="mt-3 d-flex align-items-center gap-3">
  <button class="btn btn-primary rounded-pill me-2" (click)="buyNow()">
    ðŸ›’ Buy Now
  </button>
  
  <div class="position-relative d-flex align-items-center">
    <button class="btn btn-outline-success rounded-pill me-2" (click)="addToCart()">
      âž• Add to Cart
    </button>

    <!-- Delivery Date Badge -->
    <span class="badge bg-warning text-dark ms-1 fs-6">
      Delivery by {{ deliveryDate | date:'MMM d, y' }}
    </span>
  </div>
</div>


      <hr class="my-4">

      <div>
        <h6 class="fw-bold mb-1">Seller Information</h6>
        <p class="mb-0">{{ product.sellerName }}</p>
      </div>
    </div>


<div *ngIf="relatedProducts.length > 0" class="mt-5">
  <h4 class="fw-bold mb-4">Related Products</h4>

 <div class="row g-4">
    <div class="col-md-3" *ngFor="let product of relatedProducts">
      <div class="card shadow-sm border-0 rounded-4 h-100" (click)="viewDetails(product.productId)">
        <img *ngIf="product.image1Base64" [src]="'data:image/png;base64,'+product.image1Base64"
          class="card-img-top rounded-top-4" alt="Mobile image">

        <div class="card-body">
          <h6 class="text-secondary mb-1">{{product.productCompany}}</h6>
          <h5 class="card-title fw-semibold">{{ product.productName }}</h5>

          <p class="mb-1 text-muted small">
            {{product.ram}} | {{product.storage}} | {{product.color}}
          </p>

          <p class="fw-bold text-success fs-5 mb-0">
            â‚¹{{ product.price}}
          </p>
          <p class="text-muted small mb-2">{{product.condition}}</p>

          <button class="btn btn-outline-primary btn-sm w-100 rounded-pill mt-2"
            (click)="viewDetails(product.productId)">
            View Details
          </button>
        </div>
      </div>
    </div>
  </div>

</div>

  </div>
</div>



